imports:
    - { resource: jane.yml }

services:
    chauffe_marcel.particle:
        class: ChauffeMarcel\Remote\Particle
        arguments:
            - '%particle_device_id%'
            - '%particle_access_token%'

    chauffe_marcel.storage:
        class: ChauffeMarcel\Configuration\Storage
        arguments:
            - '%kernel.root_dir%/../var/storage.json'
            - '@chauffe_marcel.api.serializer'

    chauffe_marcel.event_listener.cors:
        class: ChauffeMarcel\EventListener\CorsListener
        arguments:
            - '%accepted_domains%'
        tags:
            - { name: 'kernel.event_subscriber' }

    chauffe_marcel.api.serializer.normalizers:
        class: ArrayObject
        factory: [ChauffeMarcel\Api\Normalizer\NormalizerFactory, create]
        public: false

    chauffe_marcel.api.serializer:
        class: Symfony\Component\Serializer\Serializer
        arguments:
            - '@chauffe_marcel.api.serializer.normalizers'
            - ['@jane.serializer.json_encoder', '@jane.serializer.raw_encoder']

